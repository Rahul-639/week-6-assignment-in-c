#include<stdio.h>
int main() {
    stack<int> st1; // for enqueue
    stack<int> st2; // for dequeue
    int num_of_queries = 0;
    
    cin >> num_of_queries;
    
    for(int i=0; i < num_of_queries; i++){
        int op;
        cin >> op;
        
        if(op == 1){
            int data;
            cin >> data;
            st1.push(data);
            continue;
        }
        if(op == 2){
           if(!st2.empty()){
             st2.pop();
           }else{
            while(!st1.empty()){
                st2.push(st1.top());
                st1.pop();
            }
            st2.pop();
           } 
           continue;
        }
        
        if(op == 3){
            if(!st2.empty()){
                cout << st2.top()<<endl;
            }else{
                while(!st1.empty()){
                    st2.push(st1.top());
                    st1.pop();
                }
                cout << st2.top() <<endl;
            }
        }
    }
    
    return 0;
}
